/**
 * Model for Booking JPA entity.
 */
package com.iisc.csa.pods.projects.bookingdatabase.model;

import jakarta.persistence.*;
import lombok.Data;
import lombok.Getter;
import lombok.Setter;

/**
 * JPA Model class for Booking Entity.
 */
@Entity
@Data
@Table(name="Booking")
@Setter
@Getter
public class Booking {
    /**
     * Primary key - ID field for Booking entity.<br/><br/>
     *
     * Values will be autogenerated for each booking.
     */
    @Id
            @GeneratedValue(strategy = GenerationType.SEQUENCE, generator="bookingidgen")
            @SequenceGenerator(name = "bookingidgen", initialValue = 1, allocationSize = 1)
    Integer id;

    /**
     * Foreign key mapped to Show entity for each booking
     */
    @ManyToOne (cascade = CascadeType.ALL)
    @JoinColumn(name = "show_id")
    Show  show_id;

    /**
     * User ID column.<br/><br/>
     *
     * Since User Entity is managed in different microservice, it cannot be mapped as a foreign key.
     * Hence, resorting to basic Integer field type and validation of userid will be done in controller method.
     */
    @Column (name = "user_id")
    Integer user_id;

    /**
     * Number of seats booked in the booking request
     */
    @Column (name = "seats_booked")
    Integer seats_booked;

    // Constructors
    public Booking(){}
    public Booking(Show show_id_, Integer user_id_, Integer seats_booked_) {
        this.show_id = show_id_;
        this.user_id = user_id_;
        this.seats_booked = seats_booked_;
    }

}
